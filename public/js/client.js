$(document).ready(function(){function e(e){var n=document.getElementById("chat"),o=document.createElement("li");o.innerHTML=e,n.appendChild(o)}var n={init:function(){console.log("IO Start"),n.socket=io.connect(),n.bindEvents(),n.socket.on("msg",e)},bindEvents:function(){n.socket.on("connected",n.onConnected),n.socket.on("newGameCreated",n.newGameCreated),n.socket.on("playerJoinedRoom",n.playerJoinedRoom)},onConnected:function(){console.log("connected"),o.mySocketId=n.socket.sessionID},newGameCreated:function(e){console.log("newGameCreated data: "+e.gameId),o.Host.gameInit(e)},playerJoinedRoom:function(e){console.log("Player joined room"),o[o.myRole].updateWaitingScreen(e)}},o={gameId:0,myRole:"",mySocketId:"",init:function(){console.log("App Start!"),o.cacheElements(),o.bindEvents()},cacheElements:function(){o.$doc=$(document),o.$templateIntroScreen=$(".introScreen"),o.$templateNewGame=$(".hostScreen"),o.$templateJoinGame=$(".joinScreen")},bindEvents:function(){o.$doc.on("click","#hostGame",o.Host.onHostGame),o.$doc.on("click","#playerGame",o.Player.onJoin),o.$doc.on("click","#btnStart",o.Player.onPlayerStart)},Host:{players:[],isNewGame:!1,numPlayers:0,onHostGame:function(e){console.log("created a game"),n.socket.emit("hostCreateGame")},gameInit:function(e){console.log("Game Init"),o.gameId=e.gameId,o.mySocketId=e.mySocketId,o.myRole="Host",o.Host.numPlayers=0,console.log("App.gameId: "+o.gameId+" App.mySocketId "+o.mySocketId),o.Host.displayNewGameScreen()},updateWaitingScreen:function(e){o.Host.isNewGame&&console.log("Reset Game.  Code Under Construction"),console.log(e),console.log("Host update waiting screen"),$("#playersWaiting").append("Player "+e.username+" has joined the game."),o.Host.players.push(e),o.Host.numPlayers++,o.Host.numPlayers>=3&&$("#startGameButton").show()},displayNewGameScreen:function(){page="host",console.log("Start a game"),o.$templateIntroScreen.hide(),o.$templateNewGame.show(),$(".serverAddress").append(window.location.href),$(".lobbyAddress").append(o.gameId)}},Player:{hostSocketId:"",userName:"",onJoin:function(){console.log("onJoin clicked"),o.$templateIntroScreen.hide(),o.$templateJoinGame.show()},onPlayerStart:function(){var e={gameId:$("#inputLobby").val(),username:$("#inputUsername").val()};console.log("Attempting to join "+e.gameId+"!"),o.myRole="Player",o.Player.username=e.username,n.socket.emit("playerJoinGame",e)},updateWaitingScreen:function(e){o.myRole="Player",o.gameId=e.gameId,$("#waitingMessage").append("<br/>"+e.username+"joined the game!")}}},t=document.getElementById("chat-form");t.addEventListener("submit",function(e){var o=document.getElementById("chat-input"),t=document.getElementById("chat-name").value,a=o.value;o.value="",n.socket.emit("msg",t+": "+a),n.socket.emit("username",t),e.preventDefault()}),n.init(),o.init()});